<!DOCTYPE HTML>
<html xmlns:th="https://www.thymeleaf.org">
<head>
    <title>ðŸ“š bib</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        * {
            margin: 0;
            padding: 0;
            font-family: sans-serif;
        }

        html, body {
            font-size:90%;
        }

        form.add {
            padding: 1rem;
            white-space: nowrap;
            display: flex;
        }

        form.add input,
        form.add button {
            font-size: 1rem;
            padding: .5rem;
        }

        form.add input[type="text"] {
            width: 100%;
            max-width: 40rem;
        }

        .book {
            margin: 2rem 0;
        }

        .book .meta {
            display: flex;
            align-items: center;
        }

        .book .meta div {
            padding: .5rem;
        }

        .book .meta .status {
            font-size: 2.5rem;
        }

        .book .avail {
            margin: 1rem;
        }

        .book .avail table td.pos {
            width: 11rem;
        }

        .book .avail table td.rent {
            width: 3rem;
            text-align: center;
        }

        .book .avail table td.pre {
            text-align: right;
        }

        .book .avail table {
              border-collapse: collapse;
        }

        .book .avail table td, table td {
            border: 1px solid rgba(0,0,0,.2);
            padding: .2rem;
        }

        .book .avail table tr:first-child td {
            border-top: 0;
        }

        .book .avail table tr:last-child td {
            border-bottom: 0;
        }

        .book .avail table tr td:first-child,
        .book .avail table tr th:first-child {
            border-left: 0;
        }

        .book .avail table tr td:last-child,
        .book .avail table tr th:last-child {
            border-right: 0;
        }
    </style>
</head>
<body>

<form class="add" action="#" th:action="@{/}" method="post">
    <input type="text" th:value="${idOrLink}" name="idOrLink" placeholder="ID oder Link">&nbsp;
    <input type="submit" value="OK">
</form>

<p th:if="${books.empty}">Keine BÃ¼cher unter Beobachtung.</p>

<div class="book" th:each="b : ${books}">
    <div class="meta">
        <div class="status">
            <span th:if="${b.avail}">ðŸŸ¢</span>
            <span th:if="${not b.avail}">ðŸŸ¥</span>
        </div>
        <div>
            <h2 th:text="${b.name}"></h2>
            <h3 th:text="${b.author}"></h3>
        </div>
    </div>
<!--    <div class="avail" th:each="a : ${#lists.sort(avails[b.id], )}">-->
    <div class="avail" th:each="a : ${avails[b.id]}">
        <h3 th:text="${a.key}"></h3>
        <table>
            <tr th:each="av : ${a.value}">
                <td class="pos" th:text="${av.pos}"></td>
                <td class="rent" th:text="${av.rent != null} ? ${#temporals.format(av.rent,'dd.MM.')} : 'ðŸŸ¢'"></td>
                <td class="pre" th:text="${av.pre}"></td>
            </tr>
        </table>
        <!--            <span th:text="${a.value.pos}"></span>-->
    </div>
</div>

</body>
</html>
